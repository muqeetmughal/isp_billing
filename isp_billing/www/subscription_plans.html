<style>
  .plan {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 6px;
  }

  #show-plans-btn {
    margin-bottom: 20px;
    padding: 10px 20px;
    font-size: 16px;
  }
</style>

<button id="show-plans-btn">Show Subscription Plans</button>
<div id="plans"></div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const button = document.getElementById('show-plans-btn');
    const plansContainer = document.getElementById('plans');

    button.addEventListener('click', async function () {
      plansContainer.innerHTML = 'Loading subscription plans...';

      try {
        const response = await fetch('/api/method/isp_billing.api.subscription.get_subscription_plans');
        const result = await response.json();

        if (result.message && result.message.length > 0) {
          plansContainer.innerHTML = '';

          result.message.forEach(plan => {
            const planDiv = document.createElement('div');
            planDiv.className = 'plan';
            planDiv.innerHTML = `
              <strong>${plan.plan_name}</strong><br>
              Item: ${plan.item}<br>
              Cost: ${plan.cost} ${plan.currency}<br>
              Price Type: ${plan.price_determination}
            `;
            plansContainer.appendChild(planDiv);
          });
        } else {
          plansContainer.innerText = 'No subscription plans available.';
        }
      } catch (error) {
        console.error('Error fetching subscription plans:', error);
        plansContainer.innerText = 'Failed to load plans.';
      }
    });
  });
</script>
